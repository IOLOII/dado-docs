import{_ as p,M as i,p as d,q as l,R as a,t as n,N as s,Q as o,a1 as e}from"./framework-96b046e1.js";const c="/image/cordova/1673513435331.png",u="/image/cordova/1672977879381.png",m="/image/cordova/1672892156648.png",h="/image/cordova/1672892269035.png",v="/image/cordova/1672926831580.png",g="/image/cordova/1673332568504.png",k="/image/cordova/1673332590110.png",b="/image/cordova/1673446797658.png",f="/image/cordova/1673447783161.png",_="/image/cordova/1673610093996.png",A="/image/cordova/1673618119824.png",x={},E=a("h1",{id:"cordova",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#cordova","aria-hidden":"true"},"#"),n(" Cordova")],-1),q={href:"http://39.104.63.170:8099/IOLOII/cordova-demo",target:"_blank",rel:"noopener noreferrer"},C=e(`<h2 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用" aria-hidden="true">#</a> 基本使用</h2><h3 id="目前用不上-发布release与配置" tabindex="-1"><a class="header-anchor" href="#目前用不上-发布release与配置" aria-hidden="true">#</a> （目前用不上）发布release与配置</h3><p>cordova run android --release -- --keystore=../my-release-key.keystore --storePassword=password --alias=alias_name --password=password</p><h3 id="目前用不上-生成keytool" tabindex="-1"><a class="header-anchor" href="#目前用不上-生成keytool" aria-hidden="true">#</a> （目前用不上）生成keytool</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  keytool <span class="token parameter variable">-genkey</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-keystore</span> roadapp-release.keystore <span class="token parameter variable">-alias</span> roadApp <span class="token parameter variable">-keyalg</span> RSA <span class="token parameter variable">-validity</span> <span class="token number">4000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（执行命令之后会提示你输入密码，设置一些公司名称之类的，密码要记住，其他随意）</p><p>roadapp-release.keystore ：签名文件的名称（左边一个空格）</p><p>roadApp ：签名文件的别名（左右一个空格）</p><p>4000：有效天数</p><p>秘钥：123456</p><h3 id="目前用不上-签名" tabindex="-1"><a class="header-anchor" href="#目前用不上-签名" aria-hidden="true">#</a> （目前用不上）签名：</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>jarsigner <span class="token parameter variable">-verbose</span> <span class="token parameter variable">-keystore</span> roadapp-release.keystore <span class="token parameter variable">-signedjar</span> MF.apk app-release.aab roadApp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>roadapp-release.keystore 秘钥文件 app-release.aab 未签名目录下的文件名 roadApp 别名 MF.apk 签名后的名称</p><h4 id="roadapp-release-keystore-sha-打包机sha" tabindex="-1"><a class="header-anchor" href="#roadapp-release-keystore-sha-打包机sha" aria-hidden="true">#</a> roadapp-release.keystore SHA 打包机sha</h4><p>MD5: BD:A8:7D:66:81:49:C2:6B:61:68:32:35:70:25:D5:BA SHA1: 65:C4:1A:D4:8A:2B:0C:D4:74:F0:76:AE:7F:92:F6:C4:5C:24:9D:D7 SHA256: 7A:96:01:5A:D7:A0:88:55:19:2B:4B:57:B5:A1:87:F1:B7:6B:B9:0E:9C:38:A2:C5:62:31:E3:AF:16:BC:C8:BD</p><h4 id="debugger-打包机开发sha" tabindex="-1"><a class="header-anchor" href="#debugger-打包机开发sha" aria-hidden="true">#</a> debugger 打包机开发sha</h4><p>MD5: BF:39:CC:FB:D6:2D:05:6C:05:78:AF:51:18:EC:84:5B SHA1: 8D:32:7F:E7:8B:B2:1E:68:C3:06:C4:80:A8:C5:FC:1D:6B:A8:13:D3 SHA256: 9C:8C:72:15:29:D2:EF:8F:F4:4E:12:DD:EA:B3:80:D1:27:EC:E1:DD:86:F4:7B:C4:B9:F6:A9:A4:CF:4C:7A:10</p><h2 id="插件安装" tabindex="-1"><a class="header-anchor" href="#插件安装" aria-hidden="true">#</a> 插件安装</h2><h3 id="定位插件-cordova-plugin-gaodelocation-chenyu" tabindex="-1"><a class="header-anchor" href="#定位插件-cordova-plugin-gaodelocation-chenyu" aria-hidden="true">#</a> 定位插件 cordova-plugin-gaodelocation-chenyu</h3><blockquote><p>ff8949d957801603ee7279ab88bdaac5 账号为135****4429 分属公路app应用下</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## install</span>
<span class="token comment">## cordova plugin add cordova-plugin-gaodelocation-chenyu --variable  ANDROID_API_KEY=ff8949d957801603ee7279ab88bdaac5</span>
cordova plugin <span class="token function">add</span> cordova-plugin-gaodelocation-chenyu <span class="token parameter variable">--variable</span>  <span class="token assign-left variable">ANDROID_API_KEY</span><span class="token operator">=</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21),S=e(`<h3 id="已弃用-amaptrackplugin-下方仅做了解" tabindex="-1"><a class="header-anchor" href="#已弃用-amaptrackplugin-下方仅做了解" aria-hidden="true">#</a> （已弃用）AmapTrackPlugin 下方仅做了解</h3><p><s>高德猎鹰插件 https://gitee.com/wlyer/AmapTrackPlugin</s> AmapTrackPlugin-master</p><ol><li>申请Web服务API KEY: <code>dc646e461029ade1b010eae77bf0dfd8</code></li><li>创建终端 https://tsapi.amap.com/v1/track/terminal/add &quot;name&quot;: &quot;公路app猎鹰&quot;, &quot;sid&quot;: <code>866078</code></li></ol><h4 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h4><blockquote><p>cordova plugin add ./additional/AmapTrackPlugin-master</p></blockquote><h4 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>platform</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>config-file</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AndroidManifest.xml<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/manifest/application<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>merge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 高德地图 android key --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.amap.api.v2.apikey<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>72ecd018b48e21a8e85d556b56765505<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 定位需要的服务 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.amap.api.location.APSService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 轨迹上报需要的服务 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.amap.api.track.AMapTrackService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>config-file</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>platform</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：</strong> 该插件与其他高德插件使用中： 如果同时安装有cordova-plugin-gaodelocation-chenyu 这种插件 且cordova-plugin-gaodelocation-chenyu插件中已经配置高德androidkey 则不需配置上方内容</p><blockquote><p>android 定位sdk 9.3之后 猎鹰,地图,定位 三个共用时会有问题</p></blockquote><h3 id="关于弃用该插件后的猎鹰功能解决方案" tabindex="-1"><a class="header-anchor" href="#关于弃用该插件后的猎鹰功能解决方案" aria-hidden="true">#</a> 关于弃用该插件后的猎鹰功能解决方案</h3><blockquote><p>调试过程：原插件中调试文件：AmapTrackPlugin.java 进行文件替换 /image/AmapTrackPlugin.java =&gt; android/app/src/main/java/com/plugin/wly/amaptrack/AmapTrackPlugin/AmapTrackPlugin.java</p><blockquote><p>/image/AmapTrackPlugin.java 在当前地址栏中输入并访问下载</p></blockquote></blockquote><p>原因：不能使用 无法走入回调 <img src="`+c+'" alt="1673513435331"> 解决方案：使用android持续定位，将定位结果给到后端，后端通过web server服务调用创建猎鹰轨迹</p><h3 id="权限插件使用" tabindex="-1"><a class="header-anchor" href="#权限插件使用" aria-hidden="true">#</a> 权限插件使用</h3>',13),T={href:"https://github.com/NeoLSN/cordova-plugin-android-permissions/issues/73##issuecomment-535815058",target:"_blank",rel:"noopener noreferrer"},R=a("li",null,"使用cordova-plugin-android-permissions 插件校验权限 申请权限",-1),O=e(`<h3 id="关于权限" tabindex="-1"><a class="header-anchor" href="#关于权限" aria-hidden="true">#</a> 关于权限</h3><ul><li>android6 之后 分（普通权限）normal permission 和 （危险权限）dangerous permission</li><li>普通权限直接写在config.xml 文件中 在软件安装后自动获取</li><li><strong>危险权限</strong>不仅需要配置，还需要在使用的过程中申请获取，得到用户授权同意后才可以正常使用 (保证危险权限调用前申请即可)</li></ul><p>危险权限一共9组24个权限（不在以下名单的为普通权限）</p><table><thead><tr><th>权限组名</th><th>权限名</th></tr></thead><tbody><tr><td>CALENDAR</td><td>READ_CALENDAR，WRITE_CALENDAR</td></tr><tr><td>CAMERA</td><td>CAMERA</td></tr><tr><td>CONTACTS</td><td>READ_CONTACTS，WRITE_CONTACTS，GET_ACCOUNTS</td></tr><tr><td>LOCATION</td><td>ACCESS_FINE_LOCATION，ACCESS_COARSE_LOCATION</td></tr><tr><td>MICROPHONE</td><td>RECORD_AUDIO</td></tr><tr><td>PHONE</td><td>READ_PHONE_STATE，CALL_PHONE， READ_CALL_LOG，WRITE_CALL_LOG，ADD_VOICEMAIL，USE_SIP，PROCESS_OUTGOING_CALLS</td></tr><tr><td>SENSORS</td><td>BODY_SENSORS</td></tr><tr><td>SMS</td><td>SEND_SMS，RECEIVE_SMS，READ_SMS，RECEIVE_WAP_PUSH，RECEIVE_MMS</td></tr><tr><td>STORAGE</td><td>READ_EXTERNAL_STORAGE，WRITE_EXTERNAL_STORAGE</td></tr></tbody></table><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>android.permission.READ_CALENDAR允许程序读取用户日历数据
android.permission.WRITE_CALENDAR允许一个程序写入但不读取用户日历数据
android.permission.CAMERA，允许访问摄像头进行拍照
android.permission.READ_CONTACTS允许程序读取用户联系人数据
android.permission.WRITE_CONTACTS允许程序写入但不读取用户联系人数据
android.permission.GET_ACCOUNTS访问一个帐户列表在Accounts Service中
android.permission.ACCESS_FINE_LOCATION允许一个程序访问精良位置(如GPS)
android.permission.ACCESS_COARSE_LOCATION允许一个程序访问CellID或WiFi热点来获取粗略的位置
android.permission.RECORD_AUDIO允许程序录制音频
android.permission.CALL_PHONE允许一个程序初始化一个电话拨号不需通过拨号用户界面需要用户确认
android.permission.READ_PHONE_STATE 访问电话状态
android.permission.READ_CALL_LOG  查看电话日志
android.permission.WRITE_CALL_LOG写入电话日志
android.permission.ADD_VOICEMAIL  允许应用程序添加系统中的语音邮件
android.permission.USE_SIP  允许程序使用SIP视频服务
android.permission.PROCESS_OUTGOING_CALLS   允许应用程序监视、修改、忽略拨出的电话
android.permission.BODY_SENSORS  允许该应用存取监测您身体状况的传感器所收集的数据，例如您的心率
android.permission.SEND_SMS允许程序发送SMS短信
android.permission.RECEIVE_SMS允许程序监控一个将收到短信息，记录或处理
android.permission.READ_SMS允许程序读取短信息
android.permission.RECEIVE_WAP_PUSH允许程序监控将收到WAP PUSH信息
android.permission.RECEIVE_MMS允许一个程序监控将收到MMS彩信,记录或处理
android.permission.WRITE_EXTERNAL_STORAGE   允许程序写入外部存储，如SD卡上写文件
android.permission.READ_EXTERNAL_STORAGE   访问您设备上的照片、媒体内容和文件
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),D={href:"https://developer.android.com/reference/android/Manifest.permission",target:"_blank",rel:"noopener noreferrer"},y=e('<h2 id="问题记录" tabindex="-1"><a class="header-anchor" href="#问题记录" aria-hidden="true">#</a> 问题记录</h2><h3 id="line32-cdvcreateassetmanifest" tabindex="-1"><a class="header-anchor" href="#line32-cdvcreateassetmanifest" aria-hidden="true">#</a> line32 cdvCreateAssetManifest</h3><p>Error: Could not find method leftShift() for arguments [dev_build_extras_bfw7hxbiphfvf2wlbp02s8oxb$_run_closure1$_closure4@455ef480] on task &#39;:app:cdvCreateAssetManifest&#39; of type org.gradle.api.DefaultTask.</p><blockquote><p>https://blog.csdn.net/xiaopangcame/article/details/115543966 <img src="'+u+'" alt="1672977879381"></p></blockquote><p>按照提示找到文件 接着找到line32 cdvCreateAssetManifest 这个任务 ，原因是其中写法是旧版 需要将 <code>&lt;&lt;</code> 箭头删除 即可</p>',5),I=e(`<h3 id="无法定位问题" tabindex="-1"><a class="header-anchor" href="#无法定位问题" aria-hidden="true">#</a> 无法定位问题</h3><blockquote><p>Q: https://github.com/apache/cordova-plugin-geolocation/issues/255 I&#39;m using this plugin instead: cordova plugin add https://github.com/ToniKorin/cordova-plugin-location-provider.git this plugin using LocationProvider natively, not W3C API and work on vivo, oppo, xiaomi. cordova.plugins.LocationProvider.getOwnPosition(param like w3C, successcallback, errorcallback) https://github.com/ToniKorin/cordova-plugin-location-provider</p><blockquote><p>来自github https://github.com/apache/cordova-plugin-geolocation/issues/255#issuecomment-1325908536</p></blockquote></blockquote><h3 id="警告过时api问题-无关紧要可以忽略" tabindex="-1"><a class="header-anchor" href="#警告过时api问题-无关紧要可以忽略" aria-hidden="true">#</a> 警告过时api问题- 无关紧要可以忽略</h3><p>项目根目录下 build.gradle中增加内容</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token comment">// add</span>
    gradle<span class="token punctuation">.</span>projectsEvaluated <span class="token punctuation">{</span>
        tasks<span class="token punctuation">.</span><span class="token function">withType</span><span class="token punctuation">(</span><span class="token class-name">JavaCompile</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            options<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">&quot;UTF-8&quot;</span>
            options<span class="token punctuation">.</span>compilerArgs <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;-Xlint:unchecked&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;-Xlint:deprecation&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+m+`" alt="1672892156648"></p><p>app/build.gradle中增加</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  multiDexEnabled <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+h+'" alt="1672892269035"></p><h3 id="unhandledpromiserejectionwarning" tabindex="-1"><a class="header-anchor" href="#unhandledpromiserejectionwarning" aria-hidden="true">#</a> UnhandledPromiseRejectionWarning</h3><p>环境： cordova:8.0.0</p>',11),M=e('<p>问题原因: Android版本问题 更换为Android6</p><h3 id="cordova-couldn-t-send-request" tabindex="-1"><a class="header-anchor" href="#cordova-couldn-t-send-request" aria-hidden="true">#</a> cordova couldn&#39;t send request</h3><p>安卓9.0之后出于安全考虑，默认只使用https的方式发送，除非由开发设置 解决： 可以在项目路径下的这个位置…/platforms/android/app/src/main/AndroidManifest.xml 找到AndroidManifest.xml文件, application标签添加</p><blockquote><p>android:usesCleartextTraffic=&quot;true&quot;</p></blockquote><p><img src="'+v+'" alt="1672926831580"></p><p>参见：<a href="#networkerror">networkerror</a></p><h3 id="networkerror" tabindex="-1"><a class="header-anchor" href="#networkerror" aria-hidden="true">#</a> networkerror</h3><blockquote><p>*<strong>Android9.0不再支持http</strong></p></blockquote><p>解决： 在 AndroidManifest.xml的application中 添加 <code>android:usesCleartextTraffic=&quot;true&quot;</code> 同上<a href="#cordova-couldnt-send-request">cordova couldn&#39;t send request</a></p><blockquote><p>cordova-android@9及以下(cordova@10及以下) 页面可以直接展示 file://..... cordova-android@10及以上 (cordova@11及以上) 这个版本的 cordova-android 会默认使用自定义协议打开本地html (不配置即默认)</p></blockquote>',10),w=e(`<div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>platform</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>edit-config</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app/src/main/AndroidManifest.xml<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>merge<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/manifest/application<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span> <span class="token attr-name"><span class="token namespace">android:</span>usesCleartextTraffic</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>edit-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>platform</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关于如何使用-cordova-custom-config" tabindex="-1"><a class="header-anchor" href="#关于如何使用-cordova-custom-config" aria-hidden="true">#</a> <s>关于如何使用 cordova-custom-config</s></h3><p>demo: https://github.com/dpa99c/cordova-custom-config-example/blob/master/config.xml#L5</p><h3 id="could-not-dispatch-a-message-to-the-daemon" tabindex="-1"><a class="header-anchor" href="#could-not-dispatch-a-message-to-the-daemon" aria-hidden="true">#</a> Could not dispatch a message to the daemon</h3><p>内存不足</p><h3 id="当新建项目-使用第三方脚本-加载报错-refused-to-load-the-script-时" tabindex="-1"><a class="header-anchor" href="#当新建项目-使用第三方脚本-加载报错-refused-to-load-the-script-时" aria-hidden="true">#</a> 当新建项目 使用第三方脚本 加载报错 Refused to load the script *** 时</h3><p>注释掉 <code>&lt;meta http-equiv ** &gt;</code></p><h3 id="url-blocked-by-whitelist" tabindex="-1"><a class="header-anchor" href="#url-blocked-by-whitelist" aria-hidden="true">#</a> URL blocked by whitelist</h3><p>安装插件 cordova plugin add cordova-plugin-whitelist 配置config.xml <code>&lt;access origin=&quot;*&quot; /&gt;</code></p><h3 id="build的时候-报错-aapt-error-unbound-prefix" tabindex="-1"><a class="header-anchor" href="#build的时候-报错-aapt-error-unbound-prefix" aria-hidden="true">#</a> build的时候 报错 AAPT: error: unbound prefix.</h3><p>命名空间 <img src="`+g+'" alt="1673332568504"> 给config.xml添加 xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; <img src="'+k+`" alt="1673332590110"></p><h3 id="android-useandroidx" tabindex="-1"><a class="header-anchor" href="#android-useandroidx" aria-hidden="true">#</a> android.useAndroidX</h3><blockquote><p>Execution failed for task &#39;:app:mergeDebugResources&#39;. This project uses AndroidX dependencies, but the &#39;android.useAndroidX&#39; property is not enabled. Set this property to true in the gradle.properties file and retry.</p></blockquote><p>解决办法：</p><p>在config.xml的 &lt; platform name=&quot;android&quot;&gt;中添加：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preference</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>”AndroidXEnabled”</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>”true”</span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或者（未尝试）通过设置 项目下（非app）下的gradle.properties中添加 android.useAndroidX=true android.enableJetifier=true</p><h3 id="app-cdvcreateassetmanifest" tabindex="-1"><a class="header-anchor" href="#app-cdvcreateassetmanifest" aria-hidden="true">#</a> :app:cdvCreateAssetManifest</h3><p>FAILURE: Build failed with an exception.</p><ul><li><p>Where: Script &#39;D:\\program\\workspace\\Other\\cordova-codepush\\permission-http-9\\platforms\\android\\cordova-plugin-code-push\\hellocordova-build-extras.gradle&#39; line: 32</p></li><li><p>What went wrong: A problem occurred evaluating project &#39;:app&#39;. Could not find method leftShift() for arguments [hellocordova_build_extras_s5knc19qx54eei8uaro81mup$_run_closure1$_closure4@656dfdb4] on task &#39;:app:cdvCreateAssetManifest&#39; of type org.gradle.api.DefaultTask.</p></li></ul><blockquote><p>这个问题一般是在安装cordova-plugin-code-push 之后build android时发生，原因是gradle中语法版本过高，找到报错的 <code>.gradle文件</code> 将 &lt;&lt; 删除即可</p></blockquote><h3 id="错误-程序包com-example-chenyu不存在-import-com-example-chenyu-r" tabindex="-1"><a class="header-anchor" href="#错误-程序包com-example-chenyu不存在-import-com-example-chenyu-r" aria-hidden="true">#</a> 错误: 程序包com.example.chenyu不存在 import com.example.chenyu.R;</h3><p>在安装cordova-plugin-gaodelocation-chenyu插件后 也会报错 ***.R 的问题 这个问题找到 platforms/android/app/src/main/java/com/chenyu/GaoDeLocation/SerialLocation.java 将第17行的 <code>import com.example.chenyu.R;</code> 改为当前项目包名（例如包名：io.cordova.hellocordova） <code>io.cordova.hellocordova.R;</code> 即可</p><h3 id="duplicated-element-meta-data-com-amap-api-v2-apikey-at-androidmanifest-xml-16-9-109-duplicated-with-element-declared-at-androidmanifest-xml-15-9-109" tabindex="-1"><a class="header-anchor" href="#duplicated-element-meta-data-com-amap-api-v2-apikey-at-androidmanifest-xml-16-9-109-duplicated-with-element-declared-at-androidmanifest-xml-15-9-109" aria-hidden="true">#</a> duplicated Element meta-data#com.amap.api.v2.apikey at AndroidManifest.xml:16:9-109 duplicated with element declared at AndroidManifest.xml:15:9-109</h3><p>这种 报错信息包含 duplicated 和 AndroidManifest.xml的错误为 config.xml标签中定义的插件变量与已安装的插件中配置的变量不一致导致的变量重复添加至AndroidManifest.xml文件中 解决：</p><ol><li>可以将AndroidManifest.xml文件中定义重复的内容删除（删除前确认当前需要使用变量是哪个，且后续build会重新插入重复变量）</li><li>或者删除插件，移除android platform，重新安装platform与插件</li><li>或者找到 /platforms/android/android.json 这份文件中的变量值，修改与config.xml文件中插件使用的变量值一致（简单有效）</li></ol><blockquote><p>统一以config.xml 文件中变量为准</p></blockquote><h3 id="error-the-uploaded-package-is-identical-to-the-contents-of-the-specified-deployment-s-current-release" tabindex="-1"><a class="header-anchor" href="#error-the-uploaded-package-is-identical-to-the-contents-of-the-specified-deployment-s-current-release" aria-hidden="true">#</a> [Error] The uploaded package is identical to the contents of the specified deployment&#39;s current release.</h3><p>推送版本与当前版本一致</p><h3 id="错误-找不到符号-amaplocationclient-updateprivacyshow-cordova-getcontext-true-true" tabindex="-1"><a class="header-anchor" href="#错误-找不到符号-amaplocationclient-updateprivacyshow-cordova-getcontext-true-true" aria-hidden="true">#</a> 错误: 找不到符号 AMapLocationClient.updatePrivacyShow(cordova.getContext(), true, true);</h3><p>原因是 cordova-plugin-gaodelocation-chenyu 与 com.plugin.wly.amaptrack 两个插件使用的高德api版本不一致 <img src="`+b+'" alt="1673446797658"><img src="'+f+'" alt="1673447783161"></p><h3 id="tag-mismatch" tabindex="-1"><a class="header-anchor" href="#tag-mismatch" aria-hidden="true">#</a> tag mismatch</h3><p>dx.bat问题,一般出现在高版本sdk上 找到报错的android sdk下build-tool 重命名d8.bat 为dx.bat 还有lib内的同名文件</p><p>https://stackoverflow.com/questions/68387270/android-studio-error-installed-build-tools-revision-31-0-0-is-corrupted</p><p><img src="'+_+'" alt="1673610093996"></p><h3 id="关于使用打包机打包后app安装后打开空白的问题" tabindex="-1"><a class="header-anchor" href="#关于使用打包机打包后app安装后打开空白的问题" aria-hidden="true">#</a> 关于使用打包机打包后app安装后打开空白的问题：</h3><p>插件加载问题，需要逐步调试</p><h3 id="不支持在file协议使用-请在http或https协议下使用" tabindex="-1"><a class="header-anchor" href="#不支持在file协议使用-请在http或https协议下使用" aria-hidden="true">#</a> 不支持在file协议使用，请在http或https协议下使用！</h3><p>I/chromium: [INFO:CONSOLE(45)] &quot;腾讯地图 JavaScript API 不支持在file协议使用，请在http或https协议下使用！&quot;, source: https://map.qq.com/api/gljs?v=1.exp&amp;key=THKBZ-COO3O-XREWV-S3S5M-QCMWO-72BDM (45)</p><p>方案一 这类http问题是因为在cordova-android@9中 使用的是file协议打开的webview，升级platform-&gt;andorid@10以上就是https协议 更换平台出现的新问题有：</p><ol><li>符号 org.apache.cordova.Whitelist; 不存在 解决方式：需要在原先platform android@9中安装的Whitelist.java复制一份</li></ol><p><img src="'+A+`" alt="1673618119824"></p><ol start="2"><li>&quot;Mixed Content: The page at &#39;https://localhost/index.html&#39; was loaded over HTTPS, but requested an insecure script &#39;http://api.tianditu.gov.cn/api?v=4.0&amp;tk=2e97b3454ae50efd923c41f5fb4129d7&#39;. <a href="##Mixed-Content">Mixed Content</a></li></ol><p>方案二： 这两个测试后不行，在当前版本android@9中不可用 ，其他使用时都是将http转file用到此配置</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preference</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scheme<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preference</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AndroidInsecureFileModeEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>方案三： 继续使用andorid@9 使用webview插件修改file协议至http （当前使用） 安装插件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>cordova plugin <span class="token function">add</span> cordova-plugin-ionic-webview
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>当前安装版本为： &quot;cordova-plugin-ionic-webview&quot;: &quot;5.0.0&quot; 安装后即解决</p><h3 id="mixed-content" tabindex="-1"><a class="header-anchor" href="#mixed-content" aria-hidden="true">#</a> Mixed Content</h3>`,49),L={href:"https://zhuanlan.zhihu.com/p/539173572",target:"_blank",rel:"noopener noreferrer"},N=e(`<div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>1、修改cordova默认的本地https服务为http服务。搜索工程代码中的SCHEME_HTTPS的值，从https修改为http。

2、设置webview的属性，在SystemWebViewEngine.java文件的void initWebViewSettings()方法中添加如下属性设置：

webView.getSettings().setMixedContentMode(WebSettings.MIXED_CONTENT_ALWAYS_ALLOW);
经过以上的修改后，页面内容可以正常打开，可以正常访问网络了。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="java-io-ioexception-couldn-t-delete-platforms-android-app-build-outputs-apk-debug-output-json" tabindex="-1"><a class="header-anchor" href="#java-io-ioexception-couldn-t-delete-platforms-android-app-build-outputs-apk-debug-output-json" aria-hidden="true">#</a> java.io.IOException: Couldn&#39;t delete ***\\platforms\\android\\app\\build\\outputs\\apk\\debug\\output.json</h3><p>该情况为文件占用，关闭相关占用服务重新打包</p><h3 id="public-class-fileprovider-extends-android-support-v4-content-fileprovider" tabindex="-1"><a class="header-anchor" href="#public-class-fileprovider-extends-android-support-v4-content-fileprovider" aria-hidden="true">#</a> public class FileProvider extends android.support.v4.content.FileProvider {}</h3><p>导入文件读取模块与现有版本不兼容，将 <code>android.support.v4.content.FileProvider</code> 替换为 <code>androidx.core.content.FileProvider</code></p>`,5);function P(j,B){const t=i("ExternalLinkIcon"),r=i("engine");return d(),l("div",null,[E,a("p",null,[n("Demo项目："),a("a",q,[n("Cordova-demo"),s(t)])]),C,o(` cordova plugin add https://github.com/waliu/cordova-plugin-gaodelocation-chenyu  --variable  ANDROID_API_KEY=ff8949d957801603ee7279ab88bdaac5
npm install --save @ionic-native/gao-de-location `),S,a("ol",null,[a("li",null,[n("在config.xml文件中设置需要使用到的权限 "),a("a",T,[n("issues"),s(t)])]),R]),O,a("blockquote",null,[a("p",null,[a("a",D,[n("权限参照"),s(t)])])]),y,o(" ## 过时api whitelist\n> 不要使用旧版的code-push\n```shell\ncordova plugin add cordova-plugin-code-push@latest\n```\n通过卸载旧版cordova-plugin-code-push 与相关的其他包后重新安装\ncode-push  cordova-plugin-file-transfer  cordova-plugin-file  cordova-plugin-compat cordova-plugin-zip "),I,s(r,{name:"android",spec:"7.0.0"}),M,o(" > 可以通过配置不同协议打开 "),o(' ```xml\n  <preference name="scheme" value="http">\n  <preference name="hostname" value="localhost">\n  或者\n  <preference name="scheme" value="https">\n  <preference name="hostname" value="127.0.0.1">\n``` '),w,a("p",null,[n("摘抄自"),a("a",L,[n("cordova遇到的几个问题记录"),s(t)])]),N])}const W=p(x,[["render",P],["__file","cordova.html.vue"]]);export{W as default};
