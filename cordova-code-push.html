<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>code-push | 大道 Docs</title><meta name="description" content="null">
    <link rel="preload" href="/assets/style-5963348b.css" as="style"><link rel="stylesheet" href="/assets/style-5963348b.css">
    <link rel="modulepreload" href="/assets/app-8d0b8096.js"><link rel="modulepreload" href="/assets/framework-96b046e1.js"><link rel="modulepreload" href="/assets/cordova-code-push.html-73ce01b2.js"><link rel="modulepreload" href="/assets/cordova-code-push.html-fb53f5a7.js"><link rel="prefetch" href="/assets/cordova.html-b4038a1e.js" as="script"><link rel="prefetch" href="/assets/index.html-ebfa4335.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/cordova.html-dbcfef35.js" as="script"><link rel="prefetch" href="/assets/index.html-5d0d4db1.js" as="script"><link rel="prefetch" href="/assets/404.html-46166703.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">大道 Docs</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Cordova"><span class="title">Cordova</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Cordova"><span class="title">Cordova</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/cordova.html" class="" aria-label="Cordova"><!--[--><!--]--> Cordova <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>plugins</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a aria-current="page" href="/cordova-code-push.html" class="router-link-active router-link-exact-active router-link-active" aria-label="code-push"><!--[--><!--]--> code-push <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="About"><span class="title">About</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="About"><span class="title">About</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/IOLOII/dado-docs" rel="noopener noreferrer" target="_blank" aria-label="Github Page"><!--[--><!--]--> Github Page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="http://39.104.63.170:8099/IOLOII/docs" rel="noopener noreferrer" target="_blank" aria-label="GitLab 仓库"><!--[--><!--]--> GitLab 仓库 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Cordova"><span class="title">Cordova</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Cordova"><span class="title">Cordova</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/cordova.html" class="" aria-label="Cordova"><!--[--><!--]--> Cordova <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>plugins</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a aria-current="page" href="/cordova-code-push.html" class="router-link-active router-link-exact-active router-link-active" aria-label="code-push"><!--[--><!--]--> code-push <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="About"><span class="title">About</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="About"><span class="title">About</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/IOLOII/dado-docs" rel="noopener noreferrer" target="_blank" aria-label="Github Page"><!--[--><!--]--> Github Page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="http://39.104.63.170:8099/IOLOII/docs" rel="noopener noreferrer" target="_blank" aria-label="GitLab 仓库"><!--[--><!--]--> GitLab 仓库 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">code-push <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/cordova-code-push.html#配置热更新" class="router-link-active router-link-exact-active sidebar-item" aria-label="配置热更新："><!--[--><!--]--> 配置热更新： <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/cordova-code-push.html#当前文档中使用的环境" class="router-link-active router-link-exact-active sidebar-item" aria-label="当前文档中使用的环境"><!--[--><!--]--> 当前文档中使用的环境 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#基本" class="router-link-active router-link-exact-active sidebar-item" aria-label="基本"><!--[--><!--]--> 基本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#发布更新-摘自cordova-wrapper-main-two" class="router-link-active router-link-exact-active sidebar-item" aria-label="发布更新(摘自cordova-wrapper:main-Two)"><!--[--><!--]--> 发布更新(摘自cordova-wrapper:main-Two) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#其他" class="router-link-active router-link-exact-active sidebar-item" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#关于热更新插件版本管理" class="router-link-active router-link-exact-active sidebar-item" aria-label="关于热更新插件版本管理"><!--[--><!--]--> 关于热更新插件版本管理 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/cordova-code-push.html#各版本对应热更新" class="router-link-active router-link-exact-active sidebar-item" aria-label="各版本对应热更新"><!--[--><!--]--> 各版本对应热更新 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/cordova-code-push.html#六安-luan" class="router-link-active router-link-exact-active sidebar-item" aria-label="六安 luan"><!--[--><!--]--> 六安 luan <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#长兴-changxing" class="router-link-active router-link-exact-active sidebar-item" aria-label="长兴 changxing"><!--[--><!--]--> 长兴 changxing <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#诸暨-zhuji" class="router-link-active router-link-exact-active sidebar-item" aria-label="诸暨 zhuji"><!--[--><!--]--> 诸暨 zhuji <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#聊城开发区-liaocheng-kf" class="router-link-active router-link-exact-active sidebar-item" aria-label="聊城开发区 liaocheng_kf"><!--[--><!--]--> 聊城开发区 liaocheng_kf <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#聊城高新区-liaocheng-gx" class="router-link-active router-link-exact-active sidebar-item" aria-label="聊城高新区 liaocheng_gx"><!--[--><!--]--> 聊城高新区 liaocheng_gx <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#即墨-jimo" class="router-link-active router-link-exact-active sidebar-item" aria-label="即墨 jimo"><!--[--><!--]--> 即墨 jimo <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#宁波-ningbo" class="router-link-active router-link-exact-active sidebar-item" aria-label="宁波 ningbo"><!--[--><!--]--> 宁波 ningbo <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#松阳-songyang" class="router-link-active router-link-exact-active sidebar-item" aria-label="松阳 songyang"><!--[--><!--]--> 松阳 songyang <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cordova-code-push.html#测试环境-dev-test" class="router-link-active router-link-exact-active sidebar-item" aria-label="测试环境 dev_test"><!--[--><!--]--> 测试环境 dev_test <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="code-push" tabindex="-1"><a class="header-anchor" href="#code-push" aria-hidden="true">#</a> code-push</h1><h2 id="配置热更新" tabindex="-1"><a class="header-anchor" href="#配置热更新" aria-hidden="true">#</a> 配置热更新：</h2><h3 id="当前文档中使用的环境" tabindex="-1"><a class="header-anchor" href="#当前文档中使用的环境" aria-hidden="true">#</a> 当前文档中使用的环境</h3><div class="language-code line-numbers-mode" data-ext="code"><pre class="language-code"><code>$ cordova -v
11.0.0

$ npm -v
6.14.17

$ node -v
v14.20.0

$ cordova platform ls
Installed platforms:
  android 9.1.0

$ code-push -v
2.1.9

cordova-plugin-code-push 1.11.17
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="基本" tabindex="-1"><a class="header-anchor" href="#基本" aria-hidden="true">#</a> 基本</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i code-push-cli@2.1.9 <span class="token parameter variable">-g</span>
code-push login http://39.104.101.201:3000 <span class="token comment"># 首次登录后 后续不用在登陆</span>
code-push <span class="token function">whoami</span> <span class="token comment"># 查看当前登陆用户</span>
<span class="token comment"># 在弹出的浏览器页面进行登录并点击获取token</span>
<span class="token comment"># 账号：road  该账号为公路app使用</span>
<span class="token comment"># 密码：gzdd@2019</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>platform</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>allow-intent</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>market:*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preference</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CodePushDeploymentKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iEtFO69ljpTjmeQXbI8OfbQq0HF54ksvOXqoQ<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preference</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CodePushServerUrl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://39.104.101.201:3000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>platform</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>dev_test 意为各版本app对应的appName</p></blockquote><p><code>Production</code>: 生产环境key <code>Staging</code>: 开发环境key</p><p>在congfig.xml中配置不同的key之后分别打包出两个环境的apk</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 强制更新参数 --m</span>
code-push release-cordova dev_test android <span class="token parameter variable">--description</span><span class="token operator">=</span><span class="token string">&quot;解决了一些已知问题&quot;</span> <span class="token parameter variable">--m</span> <span class="token comment"># 强制更新</span>
code-push release-cordova dev_test android <span class="token parameter variable">--description</span><span class="token operator">=</span><span class="token string">&quot;解决了一些已知问题&quot;</span> <span class="token comment"># 可选更新</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>默认更新开发环境，测试完之后，把staging包推给production</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>code-push promote dev_test Staging Production
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="发布更新-摘自cordova-wrapper-main-two" tabindex="-1"><a class="header-anchor" href="#发布更新-摘自cordova-wrapper-main-two" aria-hidden="true">#</a> 发布更新(摘自cordova-wrapper:main-Two)</h3><p>dev_test 为 appName 注意替换</p><ol><li>当前app为发布打包过： <ol><li>替换config.xml 中 CodePushDeploymentKey的value值 为已定义的热更新服务中的key值 （Staging 开发环境 ，Production 生产环境）两个版本都需要单独发包</li></ol></li><li>客户端已安装该app，进行热更新推送： <ol><li>code-push release-cordova dev_test android --description=&quot;解决了一些已知问题&quot;</li></ol></li><li>推送至生产环境 <ol><li>code-push promote dev_test Staging Production</li></ol></li><li>不建议： 重新发布app时 <strong>可以</strong> 更新app版本号config.xml 重新打包（<strong>不建议更新版本号</strong>：原因见docs文档cordova-plugin-code-push中描述的版本号相关内容）</li><li>所有新打包apk文件 都备份到apks中 命名格式：六安-Staging.apk 六安-Production.apk (以热更新key为准，具体打包中h5使用的服务地址是生产环境还是开发环境不管)</li></ol><h3 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>code-push release-cordova dev_test android <span class="token parameter variable">-t</span> <span class="token number">3.2</span>.10 <span class="token parameter variable">--description</span><span class="token operator">=</span><span class="token string">&quot;推送给3.2.10的版本更新&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>targetBinaryVersion : <code>&quot;&gt;1.2.3&quot;</code> label：指定的部署环境里更新哪个发布版本（如：v10） updateContents： 指定应用更新的资源和代码的位置就是打包后的jsbundle位置。 如 /opt/www/bundle/ios targetBinaryVersion: 目标二进制的版本号，它的可选值规则如图 Mandatory： 是否强制更新 rollout： 指定可以更新的用户百分百，取值在1-100。默认为100</p></blockquote><p>更新回滚</p><div class="language-shelll line-numbers-mode" data-ext="shelll"><pre class="language-shelll"><code>code-push rollback &lt;appName&gt; &lt;deploymentName&gt;
code-push rollback MyApp Production --targetRelease v10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看更新情况</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>code-push deployment <span class="token function">ls</span> dev_test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="关于热更新插件版本管理" tabindex="-1"><a class="header-anchor" href="#关于热更新插件版本管理" aria-hidden="true">#</a> 关于热更新插件版本管理</h3><p>config.xml 中的version值 表示为当前打包安装后的app的版本 而在code-push的更新指令中，-t（targetBinaryVersion）即指向该版本。 每次推送更新后（如果更新中包含修改了config.xml）文件，也不会影响到已安装在手机中的app版本。 且更新时必须指定该版本，否则可能无法推送成功。</p><p>注意：</p><ul><li>不要改动config.xml中的version值，每次更新都会默认推送到当前这个version</li><li>更改了config.xml中version的值，如果没有打包出新的apk给到用户安装，那么推送中的version将不会影响，一旦打包后并且给到用户安装。此时存在多个version: <ul><li><code>code-push deployment ls dev_test</code> 运行后app version 为3.2.10</li><li><code>code-push release-cordova</code> 时修改config.xml中的version为3.2.12</li><li>此时运行 <code>code-push release-cordova dev_test android --description=&quot;不指定-t config.xml version为3.2.12&quot;</code> 会按照当前config.xml中version推送</li></ul></li><li>总结：【前提当时用热更新插件时】不要轻易修改config.xml中的version值，h5+cordova实现方式中通过在h5中定义自身版本标识</li><li>留意：在使用不同version打包后，会生成一个version名称的文件在cordova项目中 <ul><li><img src="/image/cordova-code-push/1673442715164.png" alt="1673442715164"></li></ul><!-- * ![1673440683361](/image/cordova-code-push/1673440683361.png)
* 需要传入 targetBinaryVersion 才可以正常更新
* `code-push release-cordova dev_test android -t 3.2.10 --description="推送给3.2.10的版本更新"`
* ![1673440933298](/image/cordova-code-push/1673440933298.png) --></li></ul><h2 id="各版本对应热更新" tabindex="-1"><a class="header-anchor" href="#各版本对应热更新" aria-hidden="true">#</a> 各版本对应热更新</h2><h3 id="六安-luan" tabindex="-1"><a class="header-anchor" href="#六安-luan" aria-hidden="true">#</a> 六安 luan</h3><p><code>apiUrl = &#39;https://la.91jt.net:18093/testroad&#39;</code><code>regionalVersion = &#39;六安&#39;;</code></p><p>Production: <code>rb5hTQJ6HBkfpDXBTQap6qRczrhW4ksvOXqoQ</code> Staging: <code>9sDiypMh43BxlamKJjOmQwCeuvE54ksvOXqoQ</code></p><h3 id="长兴-changxing" tabindex="-1"><a class="header-anchor" href="#长兴-changxing" aria-hidden="true">#</a> 长兴 changxing</h3><p><code>apiUrl = &#39;https://cxjt.91jt.net:9090/rmsRoad&#39;</code><code>regionalVersion = &#39;长兴&#39;;</code></p><p>Production: <code>oG8RBknuRUlTRZ0gaUL9gDhFRqAj4ksvOXqoQ</code> Staging: <code>hJjfCsgWyjxACHKz8JUWqFqssLOQ4ksvOXqoQ</code></p><h3 id="诸暨-zhuji" tabindex="-1"><a class="header-anchor" href="#诸暨-zhuji" aria-hidden="true">#</a> 诸暨 zhuji</h3><p><code>apiUrl = &#39;https://yx.91jt.net/ddRmsRoad&#39;</code><code>regionalVersion = &#39;诸暨&#39;;</code></p><p>Production: <code>FDO54guZkhuQ6kID6zzztwYm7gKg4ksvOXqoQ</code> Staging: <code>M61y5qdJhV6TgrE5lyMyYS2fxtsS4ksvOXqoQ</code></p><h3 id="聊城开发区-liaocheng-kf" tabindex="-1"><a class="header-anchor" href="#聊城开发区-liaocheng-kf" aria-hidden="true">#</a> 聊城开发区 liaocheng_kf</h3><p><code>apiUrl = &#39;https://lckfq.91jt.net:9090/ddRmsRoad&#39;</code><code>regionalVersion = &#39;聊城&#39;;</code></p><p>Production: <code>7xIM8WoJ6YUBkQ6lqzcAuVfekQ9z4ksvOXqoQ</code> Staging: <code>IXNeVNEeIkQfwSUztMXUHdBwREan4ksvOXqoQ</code></p><h3 id="聊城高新区-liaocheng-gx" tabindex="-1"><a class="header-anchor" href="#聊城高新区-liaocheng-gx" aria-hidden="true">#</a> 聊城高新区 liaocheng_gx</h3><p><code>apiUrl = &#39;https://lcgxjt.91jt.net:19012/ddRmsRoad&#39;</code><code>regionalVersion = &#39;聊城&#39;;</code></p><p>Production: <code>KS2N1kEYSm582VUHpxdfOAVTHpAW4ksvOXqoQ</code> Staging: <code>QtzmOpXrvHYTX1KT1SMJqEWXXQJW4ksvOXqoQ</code></p><h3 id="即墨-jimo" tabindex="-1"><a class="header-anchor" href="#即墨-jimo" aria-hidden="true">#</a> 即墨 jimo</h3><p><code>apiUrl = &#39;https://jimo.91jt.net:9096/testroad&#39;</code><code>regionalVersion = &#39;即墨&#39;;</code></p><p>Production: <code>21jXq1CpPU1iu4hQEesmbeU6Oq6p4ksvOXqoQ</code> Staging: <code>S6Qt4fhjJELzkC85VI1czAoExM8j4ksvOXqoQ</code></p><h3 id="宁波-ningbo" tabindex="-1"><a class="header-anchor" href="#宁波-ningbo" aria-hidden="true">#</a> 宁波 ningbo</h3><p><code>apiUrl = &#39;https://yx.91jt.net/nbddRmsRoad&#39;</code><code>regionalVersion = &#39;宁波&#39;;</code></p><p>Production: <code>kVwME5y6fUMmVqCI6mhMOWV0ktnG4ksvOXqoQ</code> Staging: <code>GoSQ6i4kP0uKhSJKWjlbeaYxn7yZ4ksvOXqoQ</code></p><h3 id="松阳-songyang" tabindex="-1"><a class="header-anchor" href="#松阳-songyang" aria-hidden="true">#</a> 松阳 songyang</h3><p><code>apiUrl = &#39;https://yx.91jt.net/syddRmsRoad&#39;</code><code>regionalVersion = &#39;松阳&#39;;</code></p><p>Production: <code>Y32ax6lXCrTgrstD1vCkupZzPLTY4ksvOXqoQ</code> Staging: <code>Y8QYYvB5UPu1GB2N5XuYDYV55ToG4ksvOXqoQ</code></p><h3 id="测试环境-dev-test" tabindex="-1"><a class="header-anchor" href="#测试环境-dev-test" aria-hidden="true">#</a> 测试环境 dev_test</h3><p><code>apiUrl = &#39;https://yx.91jt.net/testroad&#39;</code><code>regionalVersion = &#39;长兴&#39;;</code></p><p>Production: <code>iEtFO69ljpTjmeQXbI8OfbQq0HF54ksvOXqoQ</code> Staging: <code>ifwE6nq83JF7AwwwIjMOnF8ZKmUz4ksvOXqoQ</code></p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="http://39.104.63.170:8099/IOLOII/docs/edit/master/docs/cordova-code-push.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页"><!--[--><!--]--> 编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">最后一次修改于: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: yuey@coinioc.cc">IOLOII</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-8d0b8096.js" defer></script>
  </body>
</html>
